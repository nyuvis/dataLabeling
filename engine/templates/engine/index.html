<!DOCTYPE html>
{% load static%}
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>Bootstrap 101 Template</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
    
    <!-- d3 -->
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3-lasso@0.0.5/build/d3-lasso.min.js"></script>

    <!-- <link href="theme.css" rel="stylesheet"> -->
    <link href="{%static 'theme.css' %}" rel="stylesheet">
    
    <!-- HTML5 shim 和 Respond.js 是为了让 IE8 支持 HTML5 元素和媒体查询（media queries）功能 -->
    <!-- 警告：通过 file:// 协议（就是直接将 html 页面拖拽到浏览器中）访问页面时 Respond.js 不起作用 -->
    <!--[if lt IE 9]>
      <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">Data Labeling</a>
          </div>
          <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li class="active"><a href="../engine/">Home</a></li>
                <li><a href="../engine/datasetOverview">Dataset Explore</a></li>
                <!-- <li><a href="#contact">Contact</a></li> -->
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">VIS<span class="caret"></span></a>
                  <ul class="dropdown-menu">
                    <li><a href="visSel">ScatterPlot</a></li>
                    <li><a href="classifierVis">ClassifierVis</a></li>
                    <li ><a href="radarVis">RadarVis</a></li>
                    <li><a href="parallelVis">parallelVis</a></li>
                    <li><a href="dotVis">dotVis</a></li>
                    <!-- <li role="separator" class="divider"></li>
                    <li class="dropdown-header">Nav header</li>
                    <li><a href="#">Separated link</a></li>
                    <li><a href="#">One more separated link</a></li> -->
                  </ul>
                </li>
                <li><a id = "saveToFile">Save</a></li>
              </ul>
          </div><!--/.nav-collapse -->
        </div>
    </nav>

    <div class="container">

        <div class="row">
            <div class="col-md-8" id = "mainView">
                <div class="row" id = "labelView_text">
                    <div class="col-md-12">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                              <h3 class="panel-title">Review Content</h3>
                            </div>
                            <div class="panel-body" id='text_being_labeled'>
                              Panel content
                            </div>
                        </div>
                        <!-- <p id='text_being_labeled'>Text here</p> -->
                    </div>
                </div>
                <div class="row" id = "labelView_text">
                    <div class="col-md-12">
                    </div>
                </div>
            </div>
            <div class="col-md-2">
                <div class="panel panel-default" id = "labelView_label">
                    <div class="panel-heading">
                        <h3 class="panel-title">Label</h3>
                    </div>
                    <div class="panel-body" id="text_being_labeled">
                        <div class="row">
                            <div class="col-md-3"></div>
                            <div class="col-md-9">
                            <!-- "Hotels", "Restaurants", "Beauty & Spas", "Real Estate", "Airports", "Pets", "Doctors", "Auto Repair", "Lawyers" -->
                            <label class="radio">
                                <input type="radio" name="inlineRadioOptions" id="inlineRadio1" value="Hotels"> Hotels
                            </label>
                            <label class="radio">
                                <input type="radio" name="inlineRadioOptions" id="inlineRadio2" value="Restaurants"> Restaurants
                            </label>
                            <label class="radio">
                                <input type="radio" name="inlineRadioOptions" id="inlineRadio3" value="Beauty & Spas"> Beauty & Spas
                            </label>
                            <label class="radio">
                                <input type="radio" name="inlineRadioOptions" id="inlineRadio4" value="Real Estate"> Real Estate
                            </label>
                            <label class="radio">
                                <input type="radio" name="inlineRadioOptions" id="inlineRadio5" value="Airports"> Airports
                            </label>
                            <label class="radio">
                                <input type="radio" name="inlineRadioOptions" id="inlineRadio6" value="Pets"> Pets
                            </label>
                            <label class="radio">
                                <input type="radio" name="inlineRadioOptions" id="inlineRadio7" value="Doctors"> Doctors
                            </label>
                            <label class="radio">
                                <input type="radio" name="inlineRadioOptions" id="inlineRadio8" value="Auto Repair"> Auto Repair
                            </label>
                            <label class="radio">
                                <input type="radio" name="inlineRadioOptions" id="inlineRadio8" value="Lawyers"> Lawyers
                            </label>
                            <button type="button" class="btn btn-sm btn-default" id = "next_doc_button">Next</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-2" id ="caidan">

            </div>
        </div>

    </div>

    <!-- jQuery (Bootstrap 的所有 JavaScript 插件都依赖 jQuery，所以必须放在前边) -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
    <!-- 加载 Bootstrap 的所有 JavaScript 插件。你也可以根据需要只加载单个插件。 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script>
    <script type="text/javascript">
        var data_dict_single = {{data_dict | safe}}
        var query_instance_id =  JSON.parse('{{ next_instance_id | safe }}')

        console.log(data_dict_single)
        $('#text_being_labeled').empty()
        d3.select('#text_being_labeled')
          .text(data_dict_single['doc'])

        $(document).ready(function() {
            $("#next_doc_button").click(function() {
                label_input = $('input:radio:checked').val()
                var data = {
                    "label_input": label_input,
                    "query_instance_id": query_instance_id
                };
                jQuery.get("{% url 'engine:randomSampling' %}", data, function(ret) {
                    var next_instance = JSON.parse(ret['next_instance'])
                    query_instance_id = JSON.parse(ret['next_instance_id'])
                    d3.select('#text_being_labeled')
                        .text(next_instance['doc'])
                })
            })
            $("#saveToFile").click(function() {
                var data = {};
                jQuery.get("{% url 'engine:saveLabledDataToFile' %}", data, function(ret) {

                })
            })
        })
    </script>
    <!-- <script src="{%static 'index.js' %}"></script> -->
  </body>
</html>